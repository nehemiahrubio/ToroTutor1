{"ast":null,"code":"import axios from\"axios\";import{GET_PROFILE,GET_PROFILES,PROFILE_LOADING,GET_ERRORS,CLEAR_CURRENT_PROFILE,SET_CURRENT_USER}from\"./types\";// Get current profile\nexport const getCurrentProfile=()=>dispatch=>{dispatch(setProfileLoading());axios.get(\"/api/profile\").then(res=>dispatch({type:GET_PROFILE,payload:res.data})).catch(err=>dispatch({type:GET_PROFILE,payload:{}}));};export const getProfileByHandle=handle=>dispatch=>{dispatch(setProfileLoading());axios.get(\"/api/profile/handle/\".concat(handle)).then(res=>dispatch({type:GET_PROFILE,payload:res.data})).catch(err=>dispatch({type:GET_PROFILE,payload:null}));};export const createProfile=(profileData,history)=>dispatch=>{axios.post(\"/api/profile\",profileData).then(res=>history.push(\"/profile\")).catch(err=>console.error(err));};// Get all profiles (only enabled profiles)\nexport const getProfiles=()=>dispatch=>{dispatch(setProfileLoading());axios.get(\"/api/profile/all\").then(res=>{dispatch({type:GET_PROFILES,payload:res.data});}).catch(err=>{dispatch({type:GET_ERRORS,payload:null});});};export const disableProfileByUser=userId=>dispatch=>{axios.post(\"api/profile/disableProfile\",{userId:userId}).catch(err=>console.error(err));};export const enableProfileByUser=userId=>dispatch=>{axios.post(\"api/profile/enableProfile\",{userId:userId}).catch(err=>console.error(err));};export const getProfileByName=name=>dispatch=>{axios.get(\"/api/profile/search/\".concat(name)).then(res=>{dispatch({payload:res.data});}).catch(err=>{dispatch({payload:null});});};// Delete account & profile\nexport const deleteAccount=()=>dispatch=>{axios.delete(\"/api/profile\").then(res=>dispatch({type:SET_CURRENT_USER,payload:{}})).catch(err=>dispatch({type:GET_ERRORS,payload:err.response.data}));};export const deleteAccountByAdmin=id=>dispatch=>{axios.delete(\"/api/profile/id\",{data:{id:id}}).catch(err=>dispatch({type:GET_ERRORS,payload:err.response.data}));};// Profile loading\nexport const setProfileLoading=()=>{return{type:PROFILE_LOADING};};// Clear profile\nexport const clearCurrentProfile=()=>{return{type:CLEAR_CURRENT_PROFILE};};// ADMIN: Get all enabled and disabled profiles\nexport const getAllProfilesByAdmin=()=>dispatch=>{dispatch(setProfileLoading());axios.get(\"/api/profile/allUsers\").then(res=>{dispatch({type:GET_PROFILES,payload:res.data});}).catch(err=>{dispatch({type:GET_ERRORS,payload:null});});};// ADMIN: Create or update a course\nexport const postCourse=courseData=>dispatch=>{axios.post(\"/api/courses\",courseData).then(res=>{console.log(res.data);}).catch(err=>console.log(err));};","map":{"version":3,"names":["axios","GET_PROFILE","GET_PROFILES","PROFILE_LOADING","GET_ERRORS","CLEAR_CURRENT_PROFILE","SET_CURRENT_USER","getCurrentProfile","dispatch","setProfileLoading","get","then","res","type","payload","data","catch","err","getProfileByHandle","handle","concat","createProfile","profileData","history","post","push","console","error","getProfiles","disableProfileByUser","userId","enableProfileByUser","getProfileByName","name","deleteAccount","delete","response","deleteAccountByAdmin","id","clearCurrentProfile","getAllProfilesByAdmin","postCourse","courseData","log"],"sources":["C:/Users/jackie/OneDrive/文档/GitHub/TutorUP-App/client/src/redux/actions/profileActions.js"],"sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  GET_PROFILE,\r\n  GET_PROFILES,\r\n  PROFILE_LOADING,\r\n  GET_ERRORS,\r\n  CLEAR_CURRENT_PROFILE,\r\n  SET_CURRENT_USER,\r\n} from \"./types\";\r\n\r\n// Get current profile\r\nexport const getCurrentProfile = () => (dispatch) => {\r\n  dispatch(setProfileLoading());\r\n  axios\r\n    .get(\"/api/profile\")\r\n    .then((res) =>\r\n      dispatch({\r\n        type: GET_PROFILE,\r\n        payload: res.data,\r\n      })\r\n    )\r\n    .catch((err) =>\r\n      dispatch({\r\n        type: GET_PROFILE,\r\n        payload: {},\r\n      })\r\n    );\r\n};\r\n\r\nexport const getProfileByHandle = (handle) => (dispatch) => {\r\n  dispatch(setProfileLoading());\r\n  axios\r\n    .get(`/api/profile/handle/${handle}`)\r\n    .then((res) =>\r\n      dispatch({\r\n        type: GET_PROFILE,\r\n        payload: res.data,\r\n      })\r\n    )\r\n    .catch((err) =>\r\n      dispatch({\r\n        type: GET_PROFILE,\r\n        payload: null,\r\n      })\r\n    );\r\n};\r\n\r\nexport const createProfile = (profileData, history) => (dispatch) => {\r\n  axios\r\n    .post(\"/api/profile\", profileData)\r\n    .then((res) => history.push(\"/profile\"))\r\n    .catch((err) => console.error(err));\r\n};\r\n\r\n// Get all profiles (only enabled profiles)\r\nexport const getProfiles = () => (dispatch) => {\r\n  dispatch(setProfileLoading());\r\n  axios\r\n    .get(\"/api/profile/all\")\r\n    .then((res) => {\r\n      dispatch({\r\n        type: GET_PROFILES,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      dispatch({\r\n        type: GET_ERRORS,\r\n        payload: null,\r\n      });\r\n    });\r\n};\r\n\r\nexport const disableProfileByUser = (userId) => (dispatch) => {\r\n  axios\r\n    .post(\"api/profile/disableProfile\", { userId: userId })\r\n    .catch((err) => console.error(err));\r\n};\r\n\r\nexport const enableProfileByUser = (userId) => (dispatch) => {\r\n  axios\r\n    .post(\"api/profile/enableProfile\", { userId: userId })\r\n    .catch((err) => console.error(err));\r\n};\r\n\r\nexport const getProfileByName = (name) => (dispatch) => {\r\n  axios\r\n    .get(`/api/profile/search/${name}`)\r\n    .then((res) => {\r\n      dispatch({\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      dispatch({\r\n        payload: null,\r\n      });\r\n    });\r\n};\r\n\r\n// Delete account & profile\r\nexport const deleteAccount = () => (dispatch) => {\r\n  axios\r\n    .delete(\"/api/profile\")\r\n    .then((res) =>\r\n      dispatch({\r\n        type: SET_CURRENT_USER,\r\n        payload: {},\r\n      })\r\n    )\r\n    .catch((err) =>\r\n      dispatch({\r\n        type: GET_ERRORS,\r\n        payload: err.response.data,\r\n      })\r\n    );\r\n};\r\n\r\nexport const deleteAccountByAdmin = (id) => (dispatch) => {\r\n  axios.delete(\"/api/profile/id\", { data: { id: id } }).catch((err) =>\r\n    dispatch({\r\n      type: GET_ERRORS,\r\n      payload: err.response.data,\r\n    })\r\n  );\r\n};\r\n\r\n// Profile loading\r\nexport const setProfileLoading = () => {\r\n  return {\r\n    type: PROFILE_LOADING,\r\n  };\r\n};\r\n\r\n// Clear profile\r\nexport const clearCurrentProfile = () => {\r\n  return {\r\n    type: CLEAR_CURRENT_PROFILE,\r\n  };\r\n};\r\n\r\n// ADMIN: Get all enabled and disabled profiles\r\nexport const getAllProfilesByAdmin = () => (dispatch) => {\r\n  dispatch(setProfileLoading());\r\n  axios\r\n    .get(\"/api/profile/allUsers\")\r\n    .then((res) => {\r\n      dispatch({\r\n        type: GET_PROFILES,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      dispatch({\r\n        type: GET_ERRORS,\r\n        payload: null,\r\n      });\r\n    });\r\n};\r\n\r\n// ADMIN: Create or update a course\r\nexport const postCourse = (courseData) => (dispatch) => {\r\n  axios\r\n    .post(\"/api/courses\", courseData)\r\n    .then((res) => {\r\n      console.log(res.data);\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}