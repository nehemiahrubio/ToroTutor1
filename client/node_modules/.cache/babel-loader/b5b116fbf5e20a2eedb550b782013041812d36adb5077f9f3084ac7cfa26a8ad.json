{"ast":null,"code":"import React,{Component}from\"react\";import{connect}from\"react-redux\";import{loginUser}from\"../../redux/actions/authActions\";import{Link}from\"react-router-dom\";import Avatar from\"@material-ui/core/Avatar\";import Button from\"@material-ui/core/Button\";import FormControl from\"@material-ui/core/FormControl\";import Input from\"@material-ui/core/Input\";import InputLabel from\"@material-ui/core/InputLabel\";import InputAdornment from\"@material-ui/core/InputAdornment\";import LockIcon from\"@material-ui/icons/LockOutlined\";import Paper from\"@material-ui/core/Paper\";import Typography from\"@material-ui/core/Typography\";import withStyles from\"@material-ui/core/styles/withStyles\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const styles=theme=>({main:{width:\"auto\",display:\"block\",// Fix IE 11 issue.\nmarginLeft:theme.spacing(3),marginRight:theme.spacing(3),[theme.breakpoints.up(400+theme.spacing(6))]:{width:400,marginLeft:\"auto\",marginRight:\"auto\"}},paper:{marginTop:theme.spacing(8),display:\"flex\",flexDirection:\"column\",alignItems:\"center\",padding:\"\".concat(theme.spacing(2),\"px \").concat(theme.spacing(3),\"px \").concat(theme.spacing(3),\"px\")},form:{width:\"100%\",// Fix IE 11 issue.\nmarginTop:theme.spacing(1)}});class Login extends Component{constructor(){super(...arguments);this.state={email:\"\",password:\"\",errors:{},drawerOpen:false};this.onSubmit=e=>{e.preventDefault();const{email,password}=this.state;const upEmail=\"\".concat(email,\"@toromail.csudh.edu\");const userData={email:upEmail,password:password};this.props.loginUser(userData);};this.onChange=e=>{this.setState({[e.target.name]:e.target.value});};}componentDidMount(){if(this.props.auth.isAuthenticated){this.props.history.push(\"/profile\");}}componentWillReceiveProps(nextProps){if(nextProps.auth.isAuthenticated){this.props.history.push(\"/profile\");}if(nextProps.errors){this.setState({errors:nextProps.errors});}}render(){const{errors}=this.state;const{classes}=this.props;return/*#__PURE__*/_jsxs(\"div\",{className:classes.main,children:[/*#__PURE__*/_jsxs(Paper,{className:classes.paper,elevation:3,children:[/*#__PURE__*/_jsx(Avatar,{className:\"blueAvatar\",children:/*#__PURE__*/_jsx(LockIcon,{})}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Sign in\"}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsxs(FormControl,{margin:\"normal\",required:true,fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{htmlFor:\"email\",children:\"Username\"}),/*#__PURE__*/_jsx(Input,{id:\"email\",name:\"email\",autoComplete:\"email\",autoFocus:true,onChange:this.onChange,endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:\"@toromail.csudh.edu\"})})]}),/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:errors.email}),/*#__PURE__*/_jsxs(FormControl,{margin:\"normal\",required:true,fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(Input,{name:\"password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",onChange:this.onChange})]}),/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:errors.password}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",className:\"purpleSubmit\",children:\"Sign in\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"link-container\",children:/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"link reg-link\",children:\"New user? Click here to register!\"})})]});}}const mapStateToProps=state=>({auth:state.auth,errors:state.errors});export default connect(mapStateToProps,{loginUser})(withStyles(styles)(Login));","map":{"version":3,"names":["React","Component","connect","loginUser","Link","Avatar","Button","FormControl","Input","InputLabel","InputAdornment","LockIcon","Paper","Typography","withStyles","jsx","_jsx","jsxs","_jsxs","styles","theme","main","width","display","marginLeft","spacing","marginRight","breakpoints","up","paper","marginTop","flexDirection","alignItems","padding","concat","form","Login","constructor","arguments","state","email","password","errors","drawerOpen","onSubmit","e","preventDefault","upEmail","userData","props","onChange","setState","target","name","value","componentDidMount","auth","isAuthenticated","history","push","componentWillReceiveProps","nextProps","render","classes","className","children","elevation","component","variant","margin","required","fullWidth","htmlFor","id","autoComplete","autoFocus","endAdornment","position","type","to","mapStateToProps"],"sources":["C:/Users/jackie/OneDrive/文档/GitHub/TutorUP-App/client/src/components/auth/Login.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { loginUser } from \"../../redux/actions/authActions\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport LockIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\n\r\nconst styles = (theme) => ({\r\n  main: {\r\n    width: \"auto\",\r\n    display: \"block\", // Fix IE 11 issue.\r\n    marginLeft: theme.spacing(3),\r\n    marginRight: theme.spacing(3),\r\n    [theme.breakpoints.up(400 + theme.spacing(6))]: {\r\n      width: 400,\r\n      marginLeft: \"auto\",\r\n      marginRight: \"auto\",\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    padding: `${theme.spacing(2)}px ${theme.spacing(3)}px ${theme.spacing(3)}px`,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n});\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    email: \"\",\r\n    password: \"\",\r\n    errors: {},\r\n    drawerOpen: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.auth.isAuthenticated) {\r\n      this.props.history.push(\"/profile\");\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.auth.isAuthenticated) {\r\n      this.props.history.push(\"/profile\");\r\n    }\r\n\r\n    if (nextProps.errors) {\r\n      this.setState({ errors: nextProps.errors });\r\n    }\r\n  }\r\n\r\n  onSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const { email, password } = this.state;\r\n    const upEmail = `${email}@toromail.csudh.edu`;\r\n    const userData = {\r\n      email: upEmail,\r\n      password: password,\r\n    };\r\n    this.props.loginUser(userData);\r\n  };\r\n\r\n  onChange = (e) => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  };\r\n\r\n  render() {\r\n    const { errors } = this.state;\r\n    const { classes } = this.props;\r\n    return (\r\n      <div className={classes.main}>\r\n        <Paper className={classes.paper} elevation={3}>\r\n          <Avatar className=\"blueAvatar\">\r\n            <LockIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign in\r\n          </Typography>\r\n          <form className={classes.form} onSubmit={this.onSubmit}>\r\n            <FormControl margin=\"normal\" required fullWidth>\r\n              <InputLabel htmlFor=\"email\">Username</InputLabel>\r\n              <Input\r\n                id=\"email\"\r\n                name=\"email\"\r\n                autoComplete=\"email\"\r\n                autoFocus\r\n                onChange={this.onChange}\r\n                endAdornment={\r\n                  <InputAdornment position=\"end\">@toromail.csudh.edu</InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n            <span className=\"error\">{errors.email}</span>\r\n            <FormControl margin=\"normal\" required fullWidth>\r\n              <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n              <Input\r\n                name=\"password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                autoComplete=\"current-password\"\r\n                onChange={this.onChange}\r\n              />\r\n            </FormControl>\r\n            <span className=\"error\">{errors.password}</span>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              className=\"purpleSubmit\"\r\n            >\r\n              Sign in\r\n            </Button>\r\n          </form>\r\n        </Paper>\r\n        <div className=\"link-container\">\r\n          <Link to=\"/register\" className=\"link reg-link\">\r\n            New user? Click here to register!\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nLogin.propTypes = {\r\n  loginUser: PropTypes.func.isRequired,\r\n  auth: PropTypes.object.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n  errors: state.errors,\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { loginUser }\r\n)(withStyles(styles)(Login));\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}