{"ast":null,"code":"import React,{Component}from\"react\";import _ from\"lodash\";// import components\nimport ProgressSpinner from\"../common/ProgressSpinner\";import ProfileItem from\"./ProfileItem\";import SearchIcon from\"@material-ui/icons/Search\";import Button from\"@material-ui/core/Button\";import Menu from\"@material-ui/core/Menu\";import InputAdornment from\"@material-ui/core/InputAdornment\";import MenuItem from\"@material-ui/core/MenuItem\";import Paper from\"@material-ui/core/Paper\";import Chip from\"@material-ui/core/Chip\";import Grid from\"@material-ui/core/Grid\";import Typography from\"@material-ui/core/Typography\";import WarningIcon from\"@material-ui/icons/Warning\";import SortIcon from\"@material-ui/icons/SortByAlpha\";import ShuffleIcon from\"@material-ui/icons/Shuffle\";import SubjectIcon from\"@material-ui/icons/LibraryBooks\";import PaidIcon from\"@material-ui/icons/AttachMoney\";// redux imports\nimport{connect}from\"react-redux\";import{getProfiles}from\"../../redux/actions/profileActions\";import{getSubjects}from\"../../redux/actions/subjectActions\";// MUI imports\nimport{withStyles}from\"@material-ui/core/styles\";import{Input}from\"@material-ui/core\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const styles={card:{minWidth:300},padding20:{padding:20},marginLeft20:{marginLeft:20}};class ProfilesShowcase extends Component{constructor(){super();//for randomizing profiles displayed\nthis.shuffle=event=>{this.setState({data:_.shuffle(this.state.data),shuffled:true});};this.closeOrderMenu=event=>{this.setState({orderDropDown:null});};this.closeFilterMenu=event=>{this.setState({filterDropDown:null});};this.closeMajorsMenu=event=>{this.setState({majorsDropDown:null});};this.handleFilterBy=event=>{this.setState({filterDropDown:event.currentTarget});};this.handleOrderBy=event=>{this.setState({orderDropDown:event.currentTarget});};this.handleMajorsMenu=event=>{this.setState({majorsDropDown:event.currentTarget});};this.handleCheck=name=>event=>{this.setState({[name]:event.target.checked});};this.handleChange=name=>event=>{this.setState({[name]:event.target.value});};// sort currently displayed profiles by name alphabetically\nthis.orderByName=event=>{let nameSorted=_.orderBy(this.state.data,\"user.firstname\",\"asc\");this.setState(state=>({data:nameSorted}));};// sort by Major alphabetically\nthis.orderByMajor=event=>{let majorSorted=_.orderBy(this.state.data,\"major[0]\",\"asc\");this.setState(state=>({data:majorSorted}));};//uses current value of search bar to find tutors based on name, major, or the courses they tutor\nthis.handleSearch=event=>{const search_text=event.target.value;this.setState({searchText:search_text});let profileList=this.props.profile.profiles;if(this.state.filtering===true){profileList=this.state.data;}if(search_text.length>0){let searchList=[];// ... (rest of the function remains unchanged)\nif(searchList.length>0){this.setState(state=>({searchData:searchList,searchNotFound:false,searching:true}),()=>this.runAllFilters());}else{this.setState({searchNotFound:true});}}else{this.setState(state=>({searching:false}),()=>this.runAllFilters());}};//Returns results from profiles relating to chosen subject\nthis.filterBySubject=(subject,event)=>{let subjectFilterList=this.state.subjectFilters;subjectFilterList.push(subject);this.setState({subjectFilters:subjectFilterList,filtering:true},()=>this.runAllFilters());};this.filterByPaid=paid=>event=>{this.setState({filterByPaid:true,filterByVolunteer:false},()=>this.runAllFilters());};this.filterByVolunteer=paid=>event=>{this.setState({filterByVolunteer:true,filterByPaid:false},()=>this.runAllFilters());};this.removePaidFilter=paid=>event=>{this.setState({filterByPaid:false},()=>this.runAllFilters());};this.removeVolunteerFilter=paid=>event=>{this.setState({filterByVolunteer:false},()=>this.runAllFilters());};this.removeSubject=(subject,event)=>{_.pull(this.state.subjectFilters,subject);this.setState({subjectFilters:this.state.subjectFilters,searchNotFound:false},()=>this.runAllFilters());};this.saveFilters=()=>{const{subjectFilters,searchText,searchData,filterByPaid,filterByVolunteer}=this.state;sessionStorage.setItem(\"subjectFilters\",JSON.stringify(subjectFilters));sessionStorage.setItem(\"searchText\",JSON.stringify(searchText));sessionStorage.setItem(\"filterByPaid\",JSON.stringify(filterByPaid));sessionStorage.setItem(\"filterByVolunteer\",JSON.stringify(filterByVolunteer));sessionStorage.setItem(\"searchData\",JSON.stringify(searchData));};this.state={data:[],// this is the current list of profiles\nallProfiles:[],// this is the full list of profiles\nsearching:false,// whether or not we are searching\nsearchData:[],// results from searching through all profiles\nfilterByPaid:false,// whether or not we are filtering by paid\nfilterByVolunteer:false,// whether or not we are filtering by volunteer\nfiltering:false,// whether or not we are filtering\nsearchText:\"\",// the text typed in the search bar\norderDropDown:null,// order by dropdown\nfilterDropDown:null,// paid or volunteer dropdown\nmajorsDropDown:null,// majors dropdown\nsubjects:[],// all subjects\nsubjectFilters:[],// currentl list of selected subjects\nsearchNotFound:false,shuffled:false// whether or not we are shuffling\n};}//Functions then render\ncomponentDidMount(){this.props.getSubjects();this.props.getProfiles();if(sessionStorage.length>0){this.setState({subjectFilters:JSON.parse(sessionStorage.getItem(\"subjectFilters\")),searchData:JSON.parse(sessionStorage.getItem(\"searchData\")),searchText:sessionStorage.getItem(\"searchText\")===null?\"\":sessionStorage.getItem(\"searchText\").replace(/[\"\"]+/g,\"\"),filterByPaid:sessionStorage.getItem(\"filterByPaid\")==\"true\",filterByVolunteer:sessionStorage.getItem(\"filterByVolunteer\")==\"true\"},()=>this.runAllFilters());}}componentWillReceiveProps(nextProps){if(nextProps.errors)this.setState({errors:nextProps.errors});if(nextProps.subjects.subjects){this.setState({subjects:_.sortBy(_.map(nextProps.subjects.subjects,\"name\"))});}if(nextProps.profile.profiles){this.setState({allProfiles:nextProps.profile.profiles});}if(sessionStorage.length<1){this.setState({data:nextProps.profile.profiles});}}runAllFilters(){const{searchText,searchData,allProfiles,filterByPaid,filterByVolunteer,subjectFilters}=this.state;// use the search data to start if there is search text, if not use the full list\nlet profiles=searchText&&searchText.length>0?searchData:allProfiles;// check for paid and volunteer\nif(filterByPaid){profiles=_.filter(profiles,{type:\"Paid\"});}if(filterByVolunteer){profiles=_.filter(profiles,{type:\"Volunteer\"});}// check subjects\nlet subjectFilterList=subjectFilters;if(subjectFilterList.length>0){let results=[];//this loop matches profiles to given subjects\nfor(let prof in profiles){let profile=profiles[prof];let majors=profile.major;let minors=profile.minor;let courses=profile.courses;for(let e in subjectFilterList){let eachSubject=subjectFilterList[e];for(let m in majors){//add profiles by major\nlet major=majors[m];if(eachSubject===major&&!results.includes(profile)){results.push(profile);}}for(var mi in minors){//add by minor\nlet minor=minors[mi];if(eachSubject===minor&&!results.includes(profile)){results.push(profile);}}for(var c in courses){//add by course subject\nlet courseSubject=courses[c].courseSubject;if(eachSubject===courseSubject&&!results.includes(profile)){results.push(profile);}}}}if(results.length<1){this.setState({searchNotFound:true});}else{this.setState({searchNotFound:false});}this.setState({data:results});profiles=results;}this.setState({data:profiles});}render(){const{profiles,loading}=this.props.profile;const{orderDropDown,filterDropDown,majorsDropDown,subjects,data,searchNotFound}=this.state;let courseMenuItems=subjects.map((subject,i)=>/*#__PURE__*/_jsx(MenuItem,{value:subject,disabled:_.includes(this.state.subjectFilters,subject),onClick:e=>this.filterBySubject(subject),children:subject},i));let subjectChips=this.state.subjectFilters&&this.state.subjectFilters.map((subject,index)=>/*#__PURE__*/_jsx(Chip,{className:\"search-chip\",variant:\"outlined\",label:subject,onDelete:e=>this.removeSubject(subject)},index));let profileItems;const profileContent=data&&!searchNotFound?data.map(profile=>/*#__PURE__*/_jsx(ProfileItem,{profile:profile,onClick:this.saveFilters},profile._id)):/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(\"div\",{className:\"padding20\",children:[/*#__PURE__*/_jsxs(Typography,{align:\"center\",className:\"colorBlue\",children:[/*#__PURE__*/_jsx(WarningIcon,{id:\"warning\"}),\" \"]}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",gutterBottom:true,children:\"No profiles found.\"}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",align:\"center\",children:\"Try adjusting your search.\"})]})});if(profiles===null||loading){profileItems=/*#__PURE__*/_jsx(ProgressSpinner,{});}else{//if text in search bar, display search results\nprofileItems=/*#__PURE__*/_jsx(Grid,{container:true,spacing:10,children:profileContent});}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(Paper,{className:\"paddingMargin\",children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:10,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Input,{id:\"search\",placeholder:\"Name, Major, or Course\",value:this.state.searchText,onChange:event=>this.handleSearch(\"searchText\")(event),startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(SearchIcon,{})}),fullWidth:true})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:3,children:[/*#__PURE__*/_jsxs(Button,{variant:\"outlined\",\"aria-haspopup\":\"true\",onClick:this.handleMajorsMenu,\"aria-owns\":majorsDropDown?\"majorsMenu\":undefined,fullWidth:true,children:[/*#__PURE__*/_jsx(\"div\",{className:\"large\",children:\"Subjects\"}),/*#__PURE__*/_jsx(\"div\",{className:\"small\",children:/*#__PURE__*/_jsx(SubjectIcon,{})})]}),/*#__PURE__*/_jsx(Menu,{id:\"majorsMenu\",anchorEl:majorsDropDown,open:Boolean(majorsDropDown),onClose:this.closeMajorsMenu,PaperProps:{style:{maxHeight:300}},children:courseMenuItems})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:3,children:[/*#__PURE__*/_jsxs(Button,{variant:\"outlined\",\"aria-haspopup\":\"true\",onClick:this.handleFilterBy,\"aria-owns\":filterDropDown?\"filterByMenu\":undefined,fullWidth:true,children:[/*#__PURE__*/_jsx(\"div\",{className:\"large\",children:\"Paid or Volunteer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"small\",children:/*#__PURE__*/_jsx(PaidIcon,{})})]}),/*#__PURE__*/_jsxs(Menu,{id:\"filterByMenu\",anchorEl:filterDropDown,open:Boolean(filterDropDown),onClose:this.closeFilterMenu,children:[/*#__PURE__*/_jsxs(MenuItem,{value:\"Paid\",onClick:this.filterByPaid(),variant:\"outlined\",name:\"Paid\",children:[\" \",\"Paid\"]}),/*#__PURE__*/_jsxs(MenuItem,{value:\"Volunteer\",onClick:this.filterByVolunteer(),variant:\"outlined\",name:\"Volunteer\",children:[\" \",\"Volunteer\"]})]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:3,children:[/*#__PURE__*/_jsxs(Button,{variant:\"outlined\",\"aria-haspopup\":\"true\",onClick:this.handleOrderBy,\"aria-owns\":orderDropDown?\"orderByMenu\":undefined,fullWidth:true,children:[/*#__PURE__*/_jsx(\"div\",{className:\"large\",children:\"Order by\"}),/*#__PURE__*/_jsx(\"div\",{className:\"small\",children:/*#__PURE__*/_jsx(SortIcon,{})})]}),/*#__PURE__*/_jsxs(Menu,{id:\"orderByMenu\",anchorEl:orderDropDown,open:Boolean(orderDropDown),onClose:this.closeOrderMenu,children:[/*#__PURE__*/_jsx(MenuItem,{onClick:this.orderByName,children:\" First Name\"}),/*#__PURE__*/_jsx(MenuItem,{onClick:this.orderByMajor,children:\" Major\"})]})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:3,children:/*#__PURE__*/_jsxs(Button,{variant:\"outlined\",onClick:this.shuffle,fullWidth:true,children:[/*#__PURE__*/_jsx(\"div\",{className:\"large\",children:\"Shuffle\"}),/*#__PURE__*/_jsx(\"div\",{className:\"small\",children:/*#__PURE__*/_jsx(ShuffleIcon,{})})]})})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[this.state.filterByVolunteer&&/*#__PURE__*/_jsx(Chip,{className:\"search-chip\",variant:\"outlined\",label:\"Volunteer\",onDelete:this.removeVolunteerFilter()}),this.state.filterByPaid&&/*#__PURE__*/_jsx(Chip,{className:\"search-chip\",variant:\"outlined\",label:\"Paid\",onDelete:this.removePaidFilter()}),subjectChips]})]})}),/*#__PURE__*/_jsx(\"div\",{children:profileItems})]});}}const mapStateToProps=state=>({profile:state.profile,subjects:state.subjects});export default connect(mapStateToProps,{getProfiles,getSubjects})(withStyles(styles)(ProfilesShowcase));","map":{"version":3,"names":["React","Component","_","ProgressSpinner","ProfileItem","SearchIcon","Button","Menu","InputAdornment","MenuItem","Paper","Chip","Grid","Typography","WarningIcon","SortIcon","ShuffleIcon","SubjectIcon","PaidIcon","connect","getProfiles","getSubjects","withStyles","Input","jsx","_jsx","jsxs","_jsxs","styles","card","minWidth","padding20","padding","marginLeft20","marginLeft","ProfilesShowcase","constructor","shuffle","event","setState","data","state","shuffled","closeOrderMenu","orderDropDown","closeFilterMenu","filterDropDown","closeMajorsMenu","majorsDropDown","handleFilterBy","currentTarget","handleOrderBy","handleMajorsMenu","handleCheck","name","target","checked","handleChange","value","orderByName","nameSorted","orderBy","orderByMajor","majorSorted","handleSearch","search_text","searchText","profileList","props","profile","profiles","filtering","length","searchList","searchData","searchNotFound","searching","runAllFilters","filterBySubject","subject","subjectFilterList","subjectFilters","push","filterByPaid","paid","filterByVolunteer","removePaidFilter","removeVolunteerFilter","removeSubject","pull","saveFilters","sessionStorage","setItem","JSON","stringify","allProfiles","subjects","componentDidMount","parse","getItem","replace","componentWillReceiveProps","nextProps","errors","sortBy","map","filter","type","results","prof","majors","major","minors","minor","courses","e","eachSubject","m","includes","mi","c","courseSubject","render","loading","courseMenuItems","i","disabled","onClick","children","subjectChips","index","className","variant","label","onDelete","profileItems","profileContent","_id","item","xs","align","id","gutterBottom","container","spacing","Fragment","placeholder","onChange","startAdornment","position","fullWidth","undefined","anchorEl","open","Boolean","onClose","PaperProps","style","maxHeight","mapStateToProps"],"sources":["C:/Users/jackie/OneDrive/文档/GitHub/TutorUP-App/client/src/components/showcase/ProfileShowcase.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport _ from \"lodash\";\r\n\r\n// import components\r\nimport ProgressSpinner from \"../common/ProgressSpinner\";\r\nimport ProfileItem from \"./ProfileItem\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport WarningIcon from \"@material-ui/icons/Warning\";\r\nimport SortIcon from \"@material-ui/icons/SortByAlpha\";\r\nimport ShuffleIcon from \"@material-ui/icons/Shuffle\";\r\nimport SubjectIcon from \"@material-ui/icons/LibraryBooks\";\r\nimport PaidIcon from \"@material-ui/icons/AttachMoney\";\r\n\r\n// redux imports\r\nimport { connect } from \"react-redux\";\r\nimport { getProfiles } from \"../../redux/actions/profileActions\";\r\nimport { getSubjects } from \"../../redux/actions/subjectActions\";\r\n\r\n// MUI imports\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { Input } from \"@material-ui/core\";\r\n\r\nconst styles = {\r\n  card: {\r\n    minWidth: 300,\r\n  },\r\n  padding20: {\r\n    padding: 20,\r\n  },\r\n  marginLeft20: {\r\n    marginLeft: 20,\r\n  },\r\n};\r\n\r\nclass ProfilesShowcase extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      data: [], // this is the current list of profiles\r\n      allProfiles: [], // this is the full list of profiles\r\n      searching: false, // whether or not we are searching\r\n      searchData: [], // results from searching through all profiles\r\n      filterByPaid: false, // whether or not we are filtering by paid\r\n      filterByVolunteer: false, // whether or not we are filtering by volunteer\r\n      filtering: false, // whether or not we are filtering\r\n      searchText: \"\", // the text typed in the search bar\r\n      orderDropDown: null, // order by dropdown\r\n      filterDropDown: null, // paid or volunteer dropdown\r\n      majorsDropDown: null, // majors dropdown\r\n      subjects: [], // all subjects\r\n      subjectFilters: [], // currentl list of selected subjects\r\n      searchNotFound: false,\r\n      shuffled: false, // whether or not we are shuffling\r\n    };\r\n  }\r\n\r\n  //Functions then render\r\n  componentDidMount() {\r\n    this.props.getSubjects();\r\n    this.props.getProfiles();\r\n\r\n    if (sessionStorage.length > 0) {\r\n      this.setState(\r\n        {\r\n          subjectFilters: JSON.parse(sessionStorage.getItem(\"subjectFilters\")),\r\n          searchData: JSON.parse(sessionStorage.getItem(\"searchData\")),\r\n          searchText:\r\n            sessionStorage.getItem(\"searchText\") === null\r\n            ? \"\"\r\n            : sessionStorage.getItem(\"searchText\").replace(/[\"\"]+/g, \"\"),\r\n          filterByPaid: sessionStorage.getItem(\"filterByPaid\") == \"true\",\r\n          filterByVolunteer:\r\n            sessionStorage.getItem(\"filterByVolunteer\") == \"true\",\r\n        },\r\n        () => this.runAllFilters()\r\n      );\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.errors) this.setState({ errors: nextProps.errors });\r\n    if (nextProps.subjects.subjects) {\r\n      this.setState({\r\n        subjects: _.sortBy(_.map(nextProps.subjects.subjects, \"name\")),\r\n      });\r\n    }\r\n    if (nextProps.profile.profiles) {\r\n      this.setState({\r\n        allProfiles: nextProps.profile.profiles,\r\n      });\r\n    }\r\n    if (sessionStorage.length < 1) {\r\n      this.setState({ data: nextProps.profile.profiles });\r\n    }\r\n  }\r\n\r\n  //for randomizing profiles displayed\r\n  shuffle = (event) => {\r\n    this.setState({\r\n      data: _.shuffle(this.state.data),\r\n      shuffled: true,\r\n    });\r\n  };\r\n\r\n  closeOrderMenu = (event) => {\r\n    this.setState({\r\n      orderDropDown: null,\r\n    });\r\n  };\r\n\r\n  closeFilterMenu = (event) => {\r\n    this.setState({\r\n      filterDropDown: null,\r\n    });\r\n  };\r\n\r\n  closeMajorsMenu = (event) => {\r\n    this.setState({\r\n      majorsDropDown: null,\r\n    });\r\n  };\r\n\r\n  handleFilterBy = (event) => {\r\n    this.setState({\r\n      filterDropDown: event.currentTarget,\r\n    });\r\n  };\r\n\r\n  handleOrderBy = (event) => {\r\n    this.setState({\r\n      orderDropDown: event.currentTarget,\r\n    });\r\n  };\r\n\r\n  handleMajorsMenu = (event) => {\r\n    this.setState({\r\n      majorsDropDown: event.currentTarget,\r\n    });\r\n  };\r\n\r\n  handleCheck = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.checked,\r\n    });\r\n  };\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  // sort currently displayed profiles by name alphabetically\r\n  orderByName = (event) => {\r\n    let nameSorted = _.orderBy(this.state.data, \"user.firstname\", \"asc\");\r\n\r\n    this.setState((state) => ({\r\n      data: nameSorted,\r\n    }));\r\n  };\r\n\r\n  // sort by Major alphabetically\r\n  orderByMajor = (event) => {\r\n    let majorSorted = _.orderBy(this.state.data, \"major[0]\", \"asc\");\r\n\r\n    this.setState((state) => ({\r\n      data: majorSorted,\r\n    }));\r\n  };\r\n\r\n  //uses current value of search bar to find tutors based on name, major, or the courses they tutor\r\n  handleSearch = (event) => {\r\n    const search_text = event.target.value;\r\n    this.setState({\r\n      searchText: search_text,\r\n    });\r\n  \r\n    let profileList = this.props.profile.profiles;\r\n    if (this.state.filtering === true) {\r\n      profileList = this.state.data;\r\n    }\r\n  \r\n    if (search_text.length > 0) {\r\n      let searchList = [];\r\n  \r\n      // ... (rest of the function remains unchanged)\r\n  \r\n      if (searchList.length > 0) {\r\n        this.setState(\r\n          (state) => ({\r\n            searchData: searchList,\r\n            searchNotFound: false,\r\n            searching: true,\r\n          }),\r\n          () => this.runAllFilters()\r\n        );\r\n      } else {\r\n        this.setState({\r\n          searchNotFound: true,\r\n        });\r\n      }\r\n    } else {\r\n      this.setState(\r\n        (state) => ({\r\n          searching: false,\r\n        }),\r\n        () => this.runAllFilters()\r\n      );\r\n    }\r\n  };\r\n\r\n  //Returns results from profiles relating to chosen subject\r\n  filterBySubject = (subject, event) => {\r\n    let subjectFilterList = this.state.subjectFilters;\r\n    subjectFilterList.push(subject);\r\n\r\n    this.setState(\r\n      {\r\n        subjectFilters: subjectFilterList,\r\n        filtering: true,\r\n      },\r\n      () => this.runAllFilters()\r\n    );\r\n  };\r\n\r\n  filterByPaid = (paid) => (event) => {\r\n    this.setState(\r\n      {\r\n        filterByPaid: true,\r\n        filterByVolunteer: false,\r\n      },\r\n      () => this.runAllFilters()\r\n    );\r\n  };\r\n\r\n  filterByVolunteer = (paid) => (event) => {\r\n    this.setState(\r\n      {\r\n        filterByVolunteer: true,\r\n        filterByPaid: false,\r\n      },\r\n      () => this.runAllFilters()\r\n    );\r\n  };\r\n\r\n  removePaidFilter = (paid) => (event) => {\r\n    this.setState({ filterByPaid: false }, () => this.runAllFilters());\r\n  };\r\n\r\n  removeVolunteerFilter = (paid) => (event) => {\r\n    this.setState({ filterByVolunteer: false }, () => this.runAllFilters());\r\n  };\r\n\r\n  removeSubject = (subject, event) => {\r\n    _.pull(this.state.subjectFilters, subject);\r\n    this.setState(\r\n      {\r\n        subjectFilters: this.state.subjectFilters,\r\n        searchNotFound: false,\r\n      },\r\n      () => this.runAllFilters()\r\n    );\r\n  };\r\n\r\n  runAllFilters() {\r\n    const {\r\n      searchText,\r\n      searchData,\r\n      allProfiles,\r\n      filterByPaid,\r\n      filterByVolunteer,\r\n      subjectFilters,\r\n    } = this.state;\r\n    // use the search data to start if there is search text, if not use the full list\r\n    let profiles = searchText && searchText.length > 0 ? searchData : allProfiles;\r\n\r\n\r\n    // check for paid and volunteer\r\n    if (filterByPaid) {\r\n      profiles = _.filter(profiles, { type: \"Paid\" });\r\n    }\r\n\r\n    if (filterByVolunteer) {\r\n      profiles = _.filter(profiles, { type: \"Volunteer\" });\r\n    }\r\n\r\n    // check subjects\r\n    let subjectFilterList = subjectFilters;\r\n    if (subjectFilterList.length > 0) {\r\n      let results = [];\r\n\r\n      //this loop matches profiles to given subjects\r\n      for (let prof in profiles) {\r\n        let profile = profiles[prof];\r\n        let majors = profile.major;\r\n        let minors = profile.minor;\r\n        let courses = profile.courses;\r\n\r\n        for (let e in subjectFilterList) {\r\n          let eachSubject = subjectFilterList[e];\r\n          for (let m in majors) {\r\n            //add profiles by major\r\n            let major = majors[m];\r\n            if (eachSubject === major && !results.includes(profile)) {\r\n              results.push(profile);\r\n            }\r\n          }\r\n          for (var mi in minors) {\r\n            //add by minor\r\n            let minor = minors[mi];\r\n            if (eachSubject === minor && !results.includes(profile)) {\r\n              results.push(profile);\r\n            }\r\n          }\r\n          for (var c in courses) {\r\n            //add by course subject\r\n            let courseSubject = courses[c].courseSubject;\r\n            if (eachSubject === courseSubject && !results.includes(profile)) {\r\n              results.push(profile);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (results.length < 1) {\r\n        this.setState({ searchNotFound: true });\r\n      } else {\r\n        this.setState({ searchNotFound: false });\r\n      }\r\n      this.setState({ data: results });\r\n      profiles = results;\r\n    }\r\n\r\n    this.setState({ data: profiles });\r\n  }\r\n\r\n  saveFilters = () => {\r\n    const {\r\n      subjectFilters,\r\n      searchText,\r\n      searchData,\r\n      filterByPaid,\r\n      filterByVolunteer,\r\n    } = this.state;\r\n    sessionStorage.setItem(\"subjectFilters\", JSON.stringify(subjectFilters));\r\n    sessionStorage.setItem(\"searchText\", JSON.stringify(searchText));\r\n    sessionStorage.setItem(\"filterByPaid\", JSON.stringify(filterByPaid));\r\n    sessionStorage.setItem(\r\n      \"filterByVolunteer\",\r\n      JSON.stringify(filterByVolunteer)\r\n    );\r\n    sessionStorage.setItem(\"searchData\", JSON.stringify(searchData));\r\n  };\r\n\r\n  render() {\r\n    const { profiles, loading } = this.props.profile;\r\n    const {\r\n      orderDropDown,\r\n      filterDropDown,\r\n      majorsDropDown,\r\n      subjects,\r\n      data,\r\n      searchNotFound,\r\n    } = this.state;\r\n\r\n    let courseMenuItems = subjects.map((subject, i) => (\r\n      <MenuItem\r\n        key={i}\r\n        value={subject}\r\n        disabled={_.includes(this.state.subjectFilters, subject)}\r\n        onClick={(e) => this.filterBySubject(subject)}\r\n      >\r\n        {subject}\r\n      </MenuItem>\r\n    ));\r\n\r\n    let subjectChips = this.state.subjectFilters && this.state.subjectFilters.map((subject, index) => (\r\n      <Chip\r\n        className=\"search-chip\"\r\n        variant=\"outlined\"\r\n        key={index}\r\n        label={subject}\r\n        onDelete={(e) => this.removeSubject(subject)}\r\n      />\r\n    ));\r\n\r\n    let profileItems;\r\n\r\n    const profileContent =\r\n  data && !searchNotFound ? (\r\n    data.map((profile) => (\r\n      <ProfileItem\r\n        key={profile._id}\r\n        profile={profile}\r\n        onClick={this.saveFilters}\r\n      />\r\n    ))\r\n  ) : (\r\n    <Grid item xs={12}>\r\n      <div className=\"padding20\">\r\n        <Typography align=\"center\" className=\"colorBlue\">\r\n          <WarningIcon id=\"warning\" />{\" \"}\r\n        </Typography>\r\n        <Typography variant=\"h4\" align=\"center\" gutterBottom>\r\n          No profiles found.\r\n        </Typography>\r\n        <Typography variant=\"subtitle1\" align=\"center\">\r\n          Try adjusting your search.\r\n        </Typography>\r\n      </div>\r\n    </Grid>\r\n  );\r\n\r\n    if (profiles === null || loading) {\r\n      profileItems = <ProgressSpinner />;\r\n    } else {\r\n      //if text in search bar, display search results\r\n      profileItems = (\r\n        <Grid container spacing={10}>\r\n          {profileContent}\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <header>\r\n          <Paper className=\"paddingMargin\">\r\n            <Grid container spacing={10}>\r\n              <Grid item xs={12}>\r\n                <Input\r\n                  id=\"search\"\r\n                  placeholder=\"Name, Major, or Course\"\r\n                  value={this.state.searchText}\r\n                  onChange={(event) => this.handleSearch(\"searchText\")(event)}\r\n                  startAdornment={\r\n                    <InputAdornment position=\"start\">\r\n                      <SearchIcon />\r\n                    </InputAdornment>\r\n                  }\r\n                  fullWidth\r\n                />\r\n              </Grid>\r\n              <Grid item xs={3}>\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  aria-haspopup=\"true\"\r\n                  onClick={this.handleMajorsMenu}\r\n                  aria-owns={majorsDropDown ? \"majorsMenu\" : undefined}\r\n                  fullWidth\r\n                >\r\n                  <div className=\"large\">Subjects</div>\r\n                  <div className=\"small\">\r\n                    <SubjectIcon />\r\n                  </div>\r\n                </Button>\r\n                <Menu\r\n                  id=\"majorsMenu\"\r\n                  anchorEl={majorsDropDown}\r\n                  open={Boolean(majorsDropDown)}\r\n                  onClose={this.closeMajorsMenu}\r\n                  PaperProps={{ style: { maxHeight: 300 } }}\r\n                >\r\n                  {courseMenuItems}\r\n                </Menu>\r\n              </Grid>\r\n              <Grid item xs={3}>\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  aria-haspopup=\"true\"\r\n                  onClick={this.handleFilterBy}\r\n                  aria-owns={filterDropDown ? \"filterByMenu\" : undefined}\r\n                  fullWidth\r\n                >\r\n                  <div className=\"large\">Paid or Volunteer</div>\r\n                  <div className=\"small\">\r\n                    <PaidIcon />\r\n                  </div>\r\n                </Button>\r\n                <Menu\r\n                  id=\"filterByMenu\"\r\n                  anchorEl={filterDropDown}\r\n                  open={Boolean(filterDropDown)}\r\n                  onClose={this.closeFilterMenu}\r\n                >\r\n                  <MenuItem\r\n                    value=\"Paid\"\r\n                    onClick={this.filterByPaid()}\r\n                    variant=\"outlined\"\r\n                    name=\"Paid\"\r\n                  >\r\n                    {\" \"}\r\n                    Paid\r\n                  </MenuItem>\r\n                  <MenuItem\r\n                    value=\"Volunteer\"\r\n                    onClick={this.filterByVolunteer()}\r\n                    variant=\"outlined\"\r\n                    name=\"Volunteer\"\r\n                  >\r\n                    {\" \"}\r\n                    Volunteer\r\n                  </MenuItem>\r\n                </Menu>\r\n              </Grid>\r\n              <Grid item xs={3}>\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  aria-haspopup=\"true\"\r\n                  onClick={this.handleOrderBy}\r\n                  aria-owns={orderDropDown ? \"orderByMenu\" : undefined}\r\n                  fullWidth\r\n                >\r\n                  <div className=\"large\">Order by</div>\r\n                  <div className=\"small\">\r\n                    <SortIcon />\r\n                  </div>\r\n                </Button>\r\n                <Menu\r\n                  id=\"orderByMenu\"\r\n                  anchorEl={orderDropDown}\r\n                  open={Boolean(orderDropDown)}\r\n                  onClose={this.closeOrderMenu}\r\n                >\r\n                  <MenuItem onClick={this.orderByName}> First Name</MenuItem>\r\n                  <MenuItem onClick={this.orderByMajor}> Major</MenuItem>\r\n                </Menu>\r\n              </Grid>\r\n              <Grid item xs={3}>\r\n                <Button variant=\"outlined\" onClick={this.shuffle} fullWidth>\r\n                  <div className=\"large\">Shuffle</div>\r\n                  <div className=\"small\">\r\n                    <ShuffleIcon />\r\n                  </div>\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              {this.state.filterByVolunteer && (\r\n                <Chip\r\n                  className=\"search-chip\"\r\n                  variant=\"outlined\"\r\n                  label=\"Volunteer\"\r\n                  onDelete={this.removeVolunteerFilter()}\r\n                />\r\n              )}\r\n              {this.state.filterByPaid && (\r\n                <Chip\r\n                  className=\"search-chip\"\r\n                  variant=\"outlined\"\r\n                  label=\"Paid\"\r\n                  onDelete={this.removePaidFilter()}\r\n                />\r\n              )}\r\n              {subjectChips}\r\n            </Grid>\r\n          </Paper>\r\n        </header>\r\n        <div>{profileItems}</div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nProfilesShowcase.propTypes = {\r\n  profile: PropTypes.object.isRequired,\r\n  subjects: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  profile: state.profile,\r\n  subjects: state.subjects,\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { getProfiles, getSubjects }\r\n)(withStyles(styles)(ProfilesShowcase));\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}