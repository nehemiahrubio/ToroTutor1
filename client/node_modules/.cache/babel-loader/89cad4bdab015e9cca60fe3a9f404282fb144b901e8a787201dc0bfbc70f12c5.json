{"ast":null,"code":"import React,{Component,useEffect}from\"react\";import{BrowserRouter as Router,Route,Switch}from\"react-router-dom\";import{connect}from'react-redux';import\"./App.css\";// Redux related\nimport{Provider}from\"react-redux\";import store from\"./redux/store\";import{setCurrentUser,logoutUser}from\"./redux/actions/authActions\";import{clearCurrentProfile}from\"./redux/actions/profileActions\";// MUI imports\nimport withStyles from\"@material-ui/core/styles/withStyles\";import CssBaseline from\"@material-ui/core/CssBaseline\";// components\nimport AdminRoute from\"./components/common/AdminRoute\";import PrivateRoute from\"./components/common/PrivateRoute\";import AppNavbar from\"./components/layout/AppNavbar\";import AppLanding from\"./components/layout/AppLanding\";import Register from\"./components/auth/Register\";import Login from\"./components/auth/Login\";import Dashboard from\"./components/dashboard/Dashboard\";import CreateProfile from\"./components/profile/CreateProfile\";import EditProfile from\"./components/profile/EditProfile\";import Subjects from\"./components/admin/Subjects\";import ViewSubjects from\"./components/admin/ViewSubjects\";import EditSubjects from\"./components/admin/EditSubjects\";import Users from\"./components/admin/Users\";import About from\"./components/common/About\";import NotFound from\"./components/common/NotFound\";// containers\nimport ProfileShowcase from\"./components/showcase/ProfileShowcase\";import{checkAuth}from\"./utils/authPersist\";import Profile from\"./components/profile/Profile\";import UserConfirm from\"./components/auth/UserConfirm\";// Check for JWT for persistence\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";if(localStorage.jwtToken){const decoded=checkAuth();// Set user and isAuthenticated\nstore.dispatch(setCurrentUser(decoded));// Check for expired token\nconst currentTime=Date.now()/1000;if(decoded.exp<currentTime){// Logout user\nstore.dispatch(logoutUser());// Clear current Profile\nstore.dispatch(clearCurrentProfile());// Redirect to login\nwindow.location.href=\"/login\";}}const styles=theme=>({content:{flexGrow:1,padding:theme.spacing(3),height:\"100vh\",overflow:\"auto\"},appBarSpacer:theme.mixins.toolbar});const App=_ref=>{let{classes}=_ref;return/*#__PURE__*/_jsx(Provider,{store:store,children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(AppNavbar,{}),/*#__PURE__*/_jsxs(\"main\",{className:classes.content,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.appBarSpacer}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:AppLanding}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register\",component:Register}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",component:Login}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/profile/:handle\",component:Profile}),/*#__PURE__*/_jsx(PrivateRoute,{exact:true,path:\"/profiles\",component:ProfileShowcase}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/not-found\",component:NotFound}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/confirm/:id\",render:props=>/*#__PURE__*/_jsx(UserConfirm,{...props})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/about\",render:props=>/*#__PURE__*/_jsx(About,{...props,classes:classes})}),/*#__PURE__*/_jsx(PrivateRoute,{exact:true,path:\"/profile\",component:Dashboard}),/*#__PURE__*/_jsx(PrivateRoute,{exact:true,path:\"/create-profile\",component:CreateProfile}),/*#__PURE__*/_jsx(PrivateRoute,{exact:true,path:\"/edit-profile\",component:EditProfile}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/subjects\",component:Subjects}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/view-subjects\",component:ViewSubjects}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/edit-subjects\",component:EditSubjects}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/manage-users\",component:Users}),/*#__PURE__*/_jsx(Route,{path:\"*\",component:NotFound})]})]})]})})});};export default withStyles(styles)(App);","map":{"version":3,"names":["React","Component","useEffect","BrowserRouter","Router","Route","Switch","connect","Provider","store","setCurrentUser","logoutUser","clearCurrentProfile","withStyles","CssBaseline","AdminRoute","PrivateRoute","AppNavbar","AppLanding","Register","Login","Dashboard","CreateProfile","EditProfile","Subjects","ViewSubjects","EditSubjects","Users","About","NotFound","ProfileShowcase","checkAuth","Profile","UserConfirm","jsx","_jsx","jsxs","_jsxs","localStorage","jwtToken","decoded","dispatch","currentTime","Date","now","exp","window","location","href","styles","theme","content","flexGrow","padding","spacing","height","overflow","appBarSpacer","mixins","toolbar","App","_ref","classes","children","className","exact","path","component","render","props"],"sources":["C:/Users/jackie/OneDrive/文档/GitHub/TutorUP-App/client/src/App.js"],"sourcesContent":["import React, { Component, useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { connect } from 'react-redux';\r\nimport \"./App.css\";\r\n\r\n// Redux related\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./redux/store\";\r\nimport { setCurrentUser, logoutUser } from \"./redux/actions/authActions\";\r\nimport { clearCurrentProfile } from \"./redux/actions/profileActions\";\r\n\r\n// MUI imports\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n\r\n// components\r\nimport AdminRoute from \"./components/common/AdminRoute\";\r\nimport PrivateRoute from \"./components/common/PrivateRoute\";\r\nimport AppNavbar from \"./components/layout/AppNavbar\";\r\nimport AppLanding from \"./components/layout/AppLanding\";\r\nimport Register from \"./components/auth/Register\";\r\nimport Login from \"./components/auth/Login\";\r\nimport Dashboard from \"./components/dashboard/Dashboard\";\r\nimport CreateProfile from \"./components/profile/CreateProfile\";\r\nimport EditProfile from \"./components/profile/EditProfile\";\r\nimport Subjects from \"./components/admin/Subjects\";\r\nimport ViewSubjects from \"./components/admin/ViewSubjects\";\r\nimport EditSubjects from \"./components/admin/EditSubjects\";\r\nimport Users from \"./components/admin/Users\";\r\nimport About from \"./components/common/About\";\r\n\r\nimport NotFound from \"./components/common/NotFound\";\r\n\r\n// containers\r\nimport ProfileShowcase from \"./components/showcase/ProfileShowcase\";\r\nimport { checkAuth } from \"./utils/authPersist\";\r\n\r\nimport Profile from \"./components/profile/Profile\";\r\n\r\nimport UserConfirm from \"./components/auth/UserConfirm\";\r\n\r\n// Check for JWT for persistence\r\nif (localStorage.jwtToken) {\r\n  const decoded = checkAuth();\r\n  // Set user and isAuthenticated\r\n  store.dispatch(setCurrentUser(decoded));\r\n\r\n  // Check for expired token\r\n  const currentTime = Date.now() / 1000;\r\n  if (decoded.exp < currentTime) {\r\n    // Logout user\r\n    store.dispatch(logoutUser());\r\n    // Clear current Profile\r\n    store.dispatch(clearCurrentProfile());\r\n    // Redirect to login\r\n    window.location.href = \"/login\";\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n    height: \"100vh\",\r\n    overflow: \"auto\",\r\n  },\r\n  appBarSpacer: theme.mixins.toolbar,\r\n});\r\n\r\nconst App = ({ classes }) => {\r\n  return (\r\n    <Provider store={store}>\r\n      <Router>\r\n        <div className=\"App\">\r\n          <CssBaseline />\r\n          <AppNavbar />\r\n          <main className={classes.content}>\r\n            <div className={classes.appBarSpacer} />\r\n            <Switch>\r\n              <Route exact path=\"/\" component={AppLanding} />\r\n              <Route exact path=\"/register\" component={Register} />\r\n              <Route exact path=\"/login\" component={Login} />\r\n              <Route exact path=\"/profile/:handle\" component={Profile}/>\r\n              <PrivateRoute exact path=\"/profiles\" component={ProfileShowcase}\r\n              />\r\n              <Route exact path=\"/not-found\" component={NotFound} />\r\n              <Route exact path=\"/confirm/:id\" render={(props) => <UserConfirm {...props} />} />\r\n              <Route exact path=\"/about\" render={(props) => <About {...props} classes={classes} />} />\r\n              <PrivateRoute exact path=\"/profile\" component={Dashboard} />\r\n              <PrivateRoute\r\n                exact\r\n                path=\"/create-profile\"\r\n                component={CreateProfile}\r\n              />\r\n              <PrivateRoute\r\n                exact\r\n                path=\"/edit-profile\"\r\n                component={EditProfile}\r\n              />\r\n              <AdminRoute exact path=\"/subjects\" component={Subjects} />\r\n              <AdminRoute\r\n                exact\r\n                path=\"/view-subjects\"\r\n                component={ViewSubjects}\r\n              />\r\n              <AdminRoute\r\n                exact\r\n                path=\"/edit-subjects\"\r\n                component={EditSubjects}\r\n              />\r\n              <AdminRoute exact path=\"/manage-users\" component={Users} />\r\n              <Route path=\"*\" component={NotFound} />\r\n            </Switch>\r\n          </main>\r\n        </div>\r\n      </Router>\r\n    </Provider>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(App);\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}